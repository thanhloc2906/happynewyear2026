<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <link rel="website icon" type="png" href="image/horse.png">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.1/css/all.min.css" integrity="sha512-MV7K8+y+gLIBoVD59lQIYicR65iaqukzvf/nwasF0nqhPay5w/9lJmVM2hMDcnK1OnMGCdVK+iQrJ7lzPJQd1w==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="intro.css">
    <title>Happy New Year 2026</title>
    <style>
        .box-button { z-index: 9999; }
        .box-button button { cursor: pointer; }
        
        /* --- CSS MÀN HÌNH XOAY NGANG (Giống index.html) --- */
        #rotate-message {
            display: none; 
            position: fixed; 
            top: 0; left: 0; right: 0; bottom: 0;
            width: 100%; height: 100%;
            background: #000; 
            z-index: 99999999; /* Luôn nằm trên cùng */
            color: #fff; 
            flex-direction: column;
            align-items: center; 
            justify-content: center; 
            text-align: center;
            padding: 20px;
            box-sizing: border-box;
        }
        #rotate-message h2 { font-size: 24px; color: gold; margin-bottom: 20px; line-height: 1.5; font-family: sans-serif; }
        #rotate-message i { font-size: 60px; animation: rotatePhone 2s infinite; color: white; }
        
        @media screen and (orientation: portrait) {
            #rotate-message { display: flex; }
        }
        @keyframes rotatePhone {
            0%, 10% { transform: rotate(0deg); }
            40%, 60% { transform: rotate(90deg); }
            90%, 100% { transform: rotate(0deg); }
        }

        /* CSS cho nút Xem Pháo Hoa trong thư */
        .btn-check-fireworks {
            margin-top: 15px;
            padding: 10px 25px;
            background: linear-gradient(to right, #ff00cc, #3333ff);
            color: white;
            border: none;
            border-radius: 20px;
            font-weight: bold;
            cursor: pointer;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            transition: transform 0.2s;
            animation: pulseBtn 1.5s infinite;
        }
        .btn-check-fireworks:hover { transform: scale(1.1); }
        @keyframes pulseBtn {
            0% { transform: scale(1); box-shadow: 0 0 0 0 rgba(255, 0, 204, 0.7); }
            70% { transform: scale(1.05); box-shadow: 0 0 0 10px rgba(255, 0, 204, 0); }
            100% { transform: scale(1); box-shadow: 0 0 0 0 rgba(255, 0, 204, 0); }
        }
    </style>
</head>
<body>
    <div id="rotate-message">
        <i class="fa-solid fa-mobile-screen-button"></i>
        <h2>Vui lòng quay ngang điện thoại<br>để mở thiệp đẹp nhất!</h2>
    </div>

    <a href="index.html" style="position: fixed; top: 15px; left: 15px; z-index: 999999; padding: 10px 20px; background: rgba(255,255,255,0.8); color: #d00; border-radius: 20px; text-decoration: none; font-weight: bold; font-family: sans-serif; border: 2px solid #d00;">
        <i class="fa-solid fa-arrow-left"></i> Về Đếm Ngược
    </a>

    <div class="box-slider">
        <div class="slider1">
            <img src="image/bgr.jpg" alt="">
            <div class="happynewyear">
                <div class="textHappynewyear">
                    <div class="box-span"><span></span></div>
                    <div class="box-span"><span></span></div>
                    <div class="box-span"><span></span></div>
                    <div class="box-span"><span></span></div>
                </div>
            </div>
            <div class="box-button">
                <div class="button">
                    <button id="btn-open-letter">Ấn vào đây nè!</button>
                    <span><i class="fa-solid fa-heart"></i></span>
                </div>
            </div>
            <div class="box-slider_img1">
                <div class="slider-img1"><img src="image/circular-pattern.png" alt=""></div>
                <div class="pattern"><img src="image/pattern.png" alt=""></div>
            </div>
            <div class="circle"><span></span></div>
            <div class="box-flower">
                <div class="flower-img"><img src="image/flower.png" alt=""></div>
                <div class="flower-img"><img src="image/flower.png" alt=""></div>
                <div class="flower-img"><img src="image/flower1.png" alt=""></div>
                <div class="flower-img"><img src="image/flower1.png" alt=""></div>
                <div class="flower-img"><img src="image/flower2.png" alt=""></div>
                <div class="flower-img"><img src="image/flower2.png" alt=""></div>
            </div>
            <div class="box-slider_img2">
                <div class="box-slider-img2"><div class="slider-img2"><img src="image/lanterns.png" alt=""></div></div>
                <div class="box-slider-img3"><div class="slider-img3"><img src="image/lanterns.png" alt=""></div></div>
                <div class="box-slider-img4"><div class="slider-img4"><img src="image/lanterns.png" alt=""></div></div>
                <div class="box-slider-img5"><div class="slider-img5"><img src="image/lanterns.png" alt=""></div></div>
            </div>
            <div class="slider-img6">
                <img src="image/cloud-red1.png" alt="">
                <img src="image/cloud-red2.png" alt="">
                <img src="image/cloud-red2.png" alt="">
            </div>
            <div class="box-lion_dance">
                <div class="lion_dance1"><img src="image/Lion-dance.gif" alt=""></div>
                <div class="lion_dance2"><img src="image/Lion-dance2.gif" alt=""></div>
            </div>
            
            <div class="cat">
                <img src="image/horse.png" alt="" style="width: 250px; margin-top: -60px;">
            </div>

            <div class="box-number">
                <div class="number2023">
                    <div class="number"><span>2</span></div>
                    <div class="number"><span>0</span></div>
                    <div class="number"><span>2</span></div>
                    <div class="number"><span>6</span></div>
                </div>
            </div>
            <div class="box-rim">
                <div class="rim1"><img src="image/rim1.png" alt=""></div>
                <div class="rim2"><img src="image/rim1.png" alt=""></div>
            </div>
            <div class="box-texture_clouds">
                <div class="texture_clouds1"><img src="image/texture-clouds.png" alt=""></div>
                <div class="texture_clouds1"><img src="image/texture-clouds.png" alt=""></div>
                <div class="texture_clouds1"><img src="image/texture-clouds.png" alt=""></div>
                <div class="texture_clouds1"><img src="image/texture-clouds.png" alt=""></div>
                <div class="texture_clouds1"><img src="image/texture-clouds.png" alt=""></div>
            </div>
            <div class="box-big_clouds">
                <div class="big_clouds1"><img src="image/big-clouds1.png" alt=""></div>
                <div class="big_clouds2"><img src="image/big-clouds2.png" alt=""></div>
                <div class="big_clouds3"><img src="image/big-clouds3.png" alt=""></div>
            </div>
        </div>
        
        <div class="slider2">
            <div class="rhombus"></div>
            <div class="rhombus"></div>
            <div class="rhombus-img">
                <img id="img-cua-em" src="image/anhtien.jpg" alt="">
            </div>
            <div class="mail">
                <button><i class="fa-regular fa-envelope"></i></button>
                <span class="heart"><i class="fa-solid fa-heart"></i></span>
            </div>
        </div>
        
        <div class="slider3">
            <div class="box-content">
                <div class="left">
                    <img src="image/bg1.jpg" alt="">
                    <div class="center"></div>
                    <div class="lanterns-content"><img src="image/lanterns.png" alt=""></div>
                    <div class="box-big_flowers">
                        <img src="image/big-flower.png" alt=""><img src="image/big-flower.png" alt=""><img src="image/big-flower.png" alt="">
                        <img src="image/big-flower1.png" alt=""><img src="image/big-flower1.png" alt="">
                        <img src="image/big-flower2.png" alt=""><img src="image/big-flower2.png" alt=""><img src="image/big-flower2.png" alt="">
                    </div>
                    <div class="box-circle_left">
                        <div class="circle_left">
                            <img src="image/circular-pattern.png" alt="">
                            <div class="text-content">
                                <h2>Happy New</h2>
                                <h1>Year</h1>
                                <span>2026</span>
                            </div>
                        </div>
                    </div>
                    <div class="apricot_blossom">
                        <img src="image/apricot-blossom.png" alt=""><img src="image/apricot-blossom.png" alt="">
                        <img src="image/apricot-blossom.png" alt=""><img src="image/apricot-blossom.png" alt="">
                        <img src="image/apricot-blossom.png" alt=""><img src="image/apricot-blossom.png" alt="">
                    </div>
                </div>
                <div class="right">
                    <div class="content">
                        <div class="title"><h1 id="name-cua-em">&#129505Gửi bạn!</h1></div>
                        <p id="message-content" style="font-size: 14px; line-height: 1.5;"></p>
                        <div class="fixedContent">
                            <h3>Người gửi: Thanhloc</h3>
                            
                            <button class="btn-check-fireworks" onclick="checkTimeAndGo()">
                                 ĐÓN GIAO THỪA 
                            </button>
                        </div>
                    </div>
                </div>
            </div>
            <i class="fa-solid fa-xmark"></i>
        </div>
    </div>

    <audio id="song" loop>
        <source src="image/nhac.mp3" type="audio/mp3">
    </audio>

    <script src="./data.js"></script>
    <script>
        function checkTimeAndGo() {
            const targetTime = new Date("Jan 1, 2026 00:00:00").getTime();
            const now = new Date().getTime();
            const diff = targetTime - now;

            const isNearMidnight = (diff > 0 && diff <= 120000); 
            const isFireworksTime = (diff <= 0 && diff >= -300000); 

            if (isNearMidnight) {
                alert("Sắp đến Giao Thừa rồi! Hãy quay lại màn hình chính để cùng đếm ngược những giây cuối cùng của năm 2025 nhé! ⏱️");
                window.location.href = "index.html";
            } else if (isFireworksTime) {
                window.location.href = "fireworks.html";
            } else {
                if (diff > 0) {
                     alert("Chưa đến giờ Giao Thừa đâu! Quay lại trang chủ xem đồng hồ đếm ngược và đón giao thừa cùng mình nhé.<3<3");
                     window.location.href = "index.html";
                } else {
                     window.location.href = "fireworks.html";
                }
            }
        }

        const wishes = [
            "Chúc mừng năm mới 2026! Giữa muôn vàn tinh tú, cầu mong ngôi sao may mắn nhất sẽ luôn chiếu mệnh cho bạn. Chúc bạn một năm mới: Sự nghiệp thăng tiến như Rồng gặp gió, tài lộc dồi dào như nước Triều Đông, sức khỏe vững bền như tùng bách, và gia đạo an khang, vạn sự cát tường.",
            "Xuân Bính Ngọ 2026 đã về bên thềm! Xin gửi đến bạn ngàn đóa hoa thơm, vạn lời ca ngọt. Chúc bạn gạt bỏ hết mọi ưu phiền của năm cũ, mở rộng lòng mình đón nhận những vận hội mới. Chúc bạn có đủ bản lĩnh để vượt qua mọi chông gai, đủ trí tuệ để nắm bắt mọi cơ hội.",
            "Cung chúc tân xuân 2026! Chúc bạn: 12 tháng phú quý trường tồn, 365 ngày hạnh phúc viên mãn, 8.760 giờ ngập tràn tiếng cười, 525.600 phút may mắn song hành và 31.536.000 giây thăng hoa trong cuộc sống.",
            "Năm mới Tết đến, rước hên vào nhà! Chúc bạn có một bầu trời sức khỏe, một biển cả tình thương, một đại dương tình cảm, một điệp khúc tình yêu, một người yêu chung thủy, một tình bạn mênh mông, một gia đình thịnh vượng.",
            "Chào 2026! Chúc bạn luôn giữ vững nụ cười trên môi, niềm tin trong tim và ánh sáng trong đôi mắt. Mong rằng năm nay tiền vào cửa trước, vàng vào cửa sau, hai cái gặp nhau chui vào két sắt. Chúc bạn năm mới tấn tài, tấn lộc, tấn bình an!"
        ];
        document.getElementById("message-content").innerText = wishes[Math.floor(Math.random() * wishes.length)];

        // --- NHẠC ---
        const audio = document.getElementById("song");
        const urlParams = new URLSearchParams(window.location.search);
        const startTime = parseFloat(urlParams.get('t')) || 0;
        
        if (audio) {
            audio.currentTime = startTime;
            // Cố gắng phát nhạc tiếp
            var playPromise = audio.play();
            if (playPromise !== undefined) {
                playPromise.catch(error => { console.log("Auto-play was prevented"); });
            }
        }

        // --- INTERACTION ---
        document.addEventListener('DOMContentLoaded', function() {
            var openBtn = document.getElementById('btn-open-letter');
            
            if (openBtn) {
                openBtn.addEventListener('click', function() {
                    document.querySelectorAll('.flower-img').forEach(el => el.classList.toggle("active"));
                    document.querySelector('.circle').classList.toggle("active");
                    document.querySelector('.box-slider_img1').classList.toggle("active");
                    document.querySelector('.cat').classList.toggle("active");
                    document.querySelector('.box-number').classList.toggle("active");
                    document.querySelector('.box-button').classList.toggle("active");
                    document.querySelectorAll('.rhombus').forEach(el => el.classList.toggle("active"));
                    document.querySelector('.rhombus-img').classList.toggle("active");
                    document.querySelector('.mail').classList.toggle("active");
                    
                    if(audio.paused) audio.play();
                });
            }

            var mailBtn = document.querySelector(".mail button");
            var slider3 = document.querySelector(".slider3");
            var closeSlider3 = document.querySelector(".fa-xmark");
            
            if(mailBtn) {
                mailBtn.onclick = function(){
                    slider3.classList.add("active");
                }
            }
            if(closeSlider3) {
                closeSlider3.onclick = function(){
                    slider3.classList.remove("active");
                }
            }
        });
        
        var name = urlParams.get('name');
        if (name != null) {
            for (var i = 0; i < data_name.length; i++) {
                if (name == data_name[i].name) {
                    document.getElementById("name-cua-em").innerHTML = data_name[i].name;
                    document.getElementById("img-cua-em").src = data_name[i].img;
                    break;
                }
            }
        }
    </script>
</body>
</html>
