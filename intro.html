<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <link rel="website icon" type="png" href="image/horse.png">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.1/css/all.min.css" integrity="sha512-MV7K8+y+gLIBoVD59lQIYicR65iaqukzvf/nwasF0nqhPay5w/9lJmVM2hMDcnK1OnMGCdVK+iQrJ7lzPJQd1w==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="intro.css">
    <title>Happy New Year 2026</title>
    <style>
        .box-button { z-index: 9999; }
        .box-button button { cursor: pointer; }
        
        /* CSS cho n√∫t Xem Ph√°o Hoa trong th∆∞ */
        .btn-check-fireworks {
            margin-top: 15px;
            padding: 10px 25px;
            background: linear-gradient(to right, #ff00cc, #3333ff);
            color: white;
            border: none;
            border-radius: 20px;
            font-weight: bold;
            cursor: pointer;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            transition: transform 0.2s;
            animation: pulseBtn 1.5s infinite;
        }
        .btn-check-fireworks:hover {
            transform: scale(1.1);
        }
        @keyframes pulseBtn {
            0% { transform: scale(1); box-shadow: 0 0 0 0 rgba(255, 0, 204, 0.7); }
            70% { transform: scale(1.05); box-shadow: 0 0 0 10px rgba(255, 0, 204, 0); }
            100% { transform: scale(1); box-shadow: 0 0 0 0 rgba(255, 0, 204, 0); }
        }
    </style>
</head>
<body>
    <a href="index.html" style="position: fixed; top: 15px; left: 15px; z-index: 999999; padding: 10px 20px; background: rgba(255,255,255,0.8); color: #d00; border-radius: 20px; text-decoration: none; font-weight: bold; font-family: sans-serif; border: 2px solid #d00;">
        <i class="fa-solid fa-arrow-left"></i> V·ªÅ Trang Ch·ªß
    </a>

    <div class="box-slider">
        <div class="slider1">
            <img src="image/bgr.jpg" alt="">
            <div class="happynewyear">
                <div class="textHappynewyear">
                    <div class="box-span"><span></span></div>
                    <div class="box-span"><span></span></div>
                    <div class="box-span"><span></span></div>
                    <div class="box-span"><span></span></div>
                </div>
            </div>
            <div class="box-button">
                <div class="button">
                    <button id="btn-open-letter">·∫§n v√†o ƒë√¢y n√®!</button>
                    <span><i class="fa-solid fa-heart"></i></span>
                </div>
            </div>
            <div class="box-slider_img1">
                <div class="slider-img1"><img src="image/circular-pattern.png" alt=""></div>
                <div class="pattern"><img src="image/pattern.png" alt=""></div>
            </div>
            <div class="circle"><span></span></div>
            <div class="box-flower">
                <div class="flower-img"><img src="image/flower.png" alt=""></div>
                <div class="flower-img"><img src="image/flower.png" alt=""></div>
                <div class="flower-img"><img src="image/flower1.png" alt=""></div>
                <div class="flower-img"><img src="image/flower1.png" alt=""></div>
                <div class="flower-img"><img src="image/flower2.png" alt=""></div>
                <div class="flower-img"><img src="image/flower2.png" alt=""></div>
            </div>
            <div class="box-slider_img2">
                <div class="box-slider-img2"><div class="slider-img2"><img src="image/lanterns.png" alt=""></div></div>
                <div class="box-slider-img3"><div class="slider-img3"><img src="image/lanterns.png" alt=""></div></div>
                <div class="box-slider-img4"><div class="slider-img4"><img src="image/lanterns.png" alt=""></div></div>
                <div class="box-slider-img5"><div class="slider-img5"><img src="image/lanterns.png" alt=""></div></div>
            </div>
            <div class="slider-img6">
                <img src="image/cloud-red1.png" alt="">
                <img src="image/cloud-red2.png" alt="">
                <img src="image/cloud-red2.png" alt="">
            </div>
            <div class="box-lion_dance">
                <div class="lion_dance1"><img src="image/Lion-dance.gif" alt=""></div>
                <div class="lion_dance2"><img src="image/Lion-dance2.gif" alt=""></div>
            </div>
            
            <div class="cat">
                <img src="image/horse.png" alt="" style="width: 250px; margin-top: -60px;">
            </div>

            <div class="box-number">
                <div class="number2023">
                    <div class="number"><span>2</span></div>
                    <div class="number"><span>0</span></div>
                    <div class="number"><span>2</span></div>
                    <div class="number"><span>6</span></div>
                </div>
            </div>
            <div class="box-rim">
                <div class="rim1"><img src="image/rim1.png" alt=""></div>
                <div class="rim2"><img src="image/rim1.png" alt=""></div>
            </div>
            <div class="box-texture_clouds">
                <div class="texture_clouds1"><img src="image/texture-clouds.png" alt=""></div>
                <div class="texture_clouds1"><img src="image/texture-clouds.png" alt=""></div>
                <div class="texture_clouds1"><img src="image/texture-clouds.png" alt=""></div>
                <div class="texture_clouds1"><img src="image/texture-clouds.png" alt=""></div>
                <div class="texture_clouds1"><img src="image/texture-clouds.png" alt=""></div>
            </div>
            <div class="box-big_clouds">
                <div class="big_clouds1"><img src="image/big-clouds1.png" alt=""></div>
                <div class="big_clouds2"><img src="image/big-clouds2.png" alt=""></div>
                <div class="big_clouds3"><img src="image/big-clouds3.png" alt=""></div>
            </div>
        </div>
        
        <div class="slider2">
            <div class="rhombus"></div>
            <div class="rhombus"></div>
            <div class="rhombus-img">
                <img id="img-cua-em" src="image/anhtien.jpg" alt="">
            </div>
            <div class="mail">
                <button><i class="fa-regular fa-envelope"></i></button>
                <span class="heart"><i class="fa-solid fa-heart"></i></span>
            </div>
        </div>
        
        <div class="slider3">
            <div class="box-content">
                <div class="left">
                    <img src="image/bg1.jpg" alt="">
                    <div class="center"></div>
                    <div class="lanterns-content"><img src="image/lanterns.png" alt=""></div>
                    <div class="box-big_flowers">
                        <img src="image/big-flower.png" alt=""><img src="image/big-flower.png" alt=""><img src="image/big-flower.png" alt="">
                        <img src="image/big-flower1.png" alt=""><img src="image/big-flower1.png" alt="">
                        <img src="image/big-flower2.png" alt=""><img src="image/big-flower2.png" alt=""><img src="image/big-flower2.png" alt="">
                    </div>
                    <div class="box-circle_left">
                        <div class="circle_left">
                            <img src="image/circular-pattern.png" alt="">
                            <div class="text-content">
                                <h2>Happy New</h2>
                                <h1>Year</h1>
                                <span>2026</span>
                            </div>
                        </div>
                    </div>
                    <div class="apricot_blossom">
                        <img src="image/apricot-blossom.png" alt=""><img src="image/apricot-blossom.png" alt="">
                        <img src="image/apricot-blossom.png" alt=""><img src="image/apricot-blossom.png" alt="">
                        <img src="image/apricot-blossom.png" alt=""><img src="image/apricot-blossom.png" alt="">
                    </div>
                </div>
                <div class="right">
                    <div class="content">
                        <div class="title"><h1 id="name-cua-em">&#129505G·ª≠i b·∫°n!</h1></div>
                        <p id="message-content" style="font-size: 14px; line-height: 1.5;"></p>
                        <div class="fixedContent">
                            <h3>Ng∆∞·ªùi g·ª≠i: Thanhloc</h3>
                            
                            <button class="btn-check-fireworks" onclick="checkTimeAndGo()">
                                üéÜ ƒê√ìN GIAO TH·ª™A üéÜ
                            </button>

                        </div>
                    </div>
                </div>
            </div>
            <i class="fa-solid fa-xmark"></i>
        </div>
    </div>

    <audio id="song" loop>
        <source src="image/nhac.mp3" type="audio/mp3">
    </audio>

    <script src="./data.js"></script>
    <script>
        // --- H√ÄM KI·ªÇM TRA TH·ªúI GIAN ƒê·ªÇ CHUY·ªÇN TRANG ---
        function checkTimeAndGo() {
            // M·ªëc Giao Th·ª´a: 00:00:00 ng√†y 1/1/2026
            const targetTime = new Date("Jan 1, 2026 00:00:00").getTime();
            const now = new Date().getTime();
            
            // T√≠nh kho·∫£ng c√°ch (ms)
            // N·∫øu > 0: Ch∆∞a ƒë·∫øn giao th·ª´a
            // N·∫øu <= 0: ƒê√£ qua giao th·ª´a
            const diff = targetTime - now;

            // Quy ƒë·ªïi: 1 ph√∫t = 60000ms
            // Kho·∫£ng 11:58 ƒë·∫øn 11:59:59 (c√≤n 2 ph√∫t ho·∫∑c √≠t h∆°n)
            const isNearMidnight = (diff > 0 && diff <= 120000); // 2 ph√∫t cu·ªëi c√πng
            
            // Kho·∫£ng 00:00 ƒë·∫øn 00:05 (ƒë√£ qua giao th·ª´a t·ªëi ƒëa 5 ph√∫t)
            const isFireworksTime = (diff <= 0 && diff >= -300000); // 5 ph√∫t ƒë·∫ßu nƒÉm m·ªõi

            if (isNearMidnight) {
                // TR∆Ø·ªúNG H·ª¢P: 11:58 - 11:59 -> ƒêu·ªïi v·ªÅ trang ch·ªß
                alert("S·∫Øp ƒë·∫øn Giao Th·ª´a r·ªìi! H√£y quay l·∫°i m√†n h√¨nh ch√≠nh ƒë·ªÉ c√πng ƒë·∫øm ng∆∞·ª£c nh·ªØng gi√¢y cu·ªëi c√πng nh√©! ‚è±Ô∏è");
                window.location.href = "index.html";
            } 
            else if (isFireworksTime) {
                // TR∆Ø·ªúNG H·ª¢P: 00:00 - 00:05 -> Cho xem ph√°o hoa
                window.location.href = "fireworks.html";
            } 
            else {
                // C√°c tr∆∞·ªùng h·ª£p kh√°c (Ch∆∞a ƒë·∫øn gi·ªù ho·∫∑c ƒë√£ qua l√¢u)
                if (diff > 0) {
                     // N·∫øu ch∆∞a ƒë·∫øn gi·ªù (v√≠ d·ª• m·ªõi 10h t·ªëi), c≈©ng ƒëu·ªïi v·ªÅ trang ch·ªß cho ƒë√∫ng quy tr√¨nh
                     alert("Ch∆∞a ƒë·∫øn gi·ªù Giao Th·ª´a ƒë√¢u! Quay l·∫°i trang ch·ªß xem ƒë·ªìng h·ªì ƒë·∫øm ng∆∞·ª£c nh√© r·ªìi ƒë·ª£i 00h xem ph√°o hoa c√πng m√¨nh nh√©<3<3ü´∞");
                     window.location.href = "index.html";
                } else {
                     // N·∫øu ƒë√£ qua l√¢u r·ªìi (v√≠ d·ª• s√°ng m√πng 1), cho xem ph√°o hoa lu√¥n
                     window.location.href = "fireworks.html";
                }
            }
        }

        const wishes = [
            "Ch√∫c m·ª´ng nƒÉm m·ªõi 2026! Gi·ªØa mu√¥n v√†n tinh t√∫, c·∫ßu mong ng√¥i sao may m·∫Øn nh·∫•t s·∫Ω lu√¥n chi·∫øu m·ªánh cho b·∫°n. Ch√∫c b·∫°n m·ªôt nƒÉm m·ªõi: S·ª± nghi·ªáp thƒÉng ti·∫øn nh∆∞ R·ªìng g·∫∑p gi√≥, t√†i l·ªôc d·ªìi d√†o nh∆∞ n∆∞·ªõc Tri·ªÅu ƒê√¥ng, s·ª©c kh·ªèe v·ªØng b·ªÅn nh∆∞ t√πng b√°ch, v√† gia ƒë·∫°o an khang, v·∫°n s·ª± c√°t t∆∞·ªùng.",
            "Xu√¢n B√≠nh Ng·ªç 2026 ƒë√£ v·ªÅ b√™n th·ªÅm! Xin g·ª≠i ƒë·∫øn b·∫°n ng√†n ƒë√≥a hoa th∆°m, v·∫°n l·ªùi ca ng·ªçt. Ch√∫c b·∫°n g·∫°t b·ªè h·∫øt m·ªçi ∆∞u phi·ªÅn c·ªßa nƒÉm c≈©, m·ªü r·ªông l√≤ng m√¨nh ƒë√≥n nh·∫≠n nh·ªØng v·∫≠n h·ªôi m·ªõi. Ch√∫c b·∫°n c√≥ ƒë·ªß b·∫£n lƒ©nh ƒë·ªÉ v∆∞·ª£t qua m·ªçi ch√¥ng gai, ƒë·ªß tr√≠ tu·ªá ƒë·ªÉ n·∫Øm b·∫Øt m·ªçi c∆° h·ªôi.",
            "Cung ch√∫c t√¢n xu√¢n 2026! Ch√∫c b·∫°n: 12 th√°ng ph√∫ qu√Ω tr∆∞·ªùng t·ªìn, 365 ng√†y h·∫°nh ph√∫c vi√™n m√£n, 8.760 gi·ªù ng·∫≠p tr√†n ti·∫øng c∆∞·ªùi, 525.600 ph√∫t may m·∫Øn song h√†nh v√† 31.536.000 gi√¢y thƒÉng hoa trong cu·ªôc s·ªëng.",
            "NƒÉm m·ªõi T·∫øt ƒë·∫øn, r∆∞·ªõc h√™n v√†o nh√†! Ch√∫c b·∫°n c√≥ m·ªôt b·∫ßu tr·ªùi s·ª©c kh·ªèe, m·ªôt bi·ªÉn c·∫£ t√¨nh th∆∞∆°ng, m·ªôt ƒë·∫°i d∆∞∆°ng t√¨nh c·∫£m, m·ªôt ƒëi·ªáp kh√∫c t√¨nh y√™u, m·ªôt ng∆∞·ªùi y√™u chung th·ªßy, m·ªôt t√¨nh b·∫°n m√™nh m√¥ng, m·ªôt gia ƒë√¨nh th·ªãnh v∆∞·ª£ng.",
            "Ch√†o 2026! Ch√∫c b·∫°n lu√¥n gi·ªØ v·ªØng n·ª• c∆∞·ªùi tr√™n m√¥i, ni·ªÅm tin trong tim v√† √°nh s√°ng trong ƒë√¥i m·∫Øt. Mong r·∫±ng nƒÉm nay ti·ªÅn v√†o c·ª≠a tr∆∞·ªõc, v√†ng v√†o c·ª≠a sau, hai c√°i g·∫∑p nhau chui v√†o k√©t s·∫Øt. Ch√∫c b·∫°n nƒÉm m·ªõi t·∫•n t√†i, t·∫•n l·ªôc, t·∫•n b√¨nh an!"
        ];
        document.getElementById("message-content").innerText = wishes[Math.floor(Math.random() * wishes.length)];

        // --- X·ª¨ L√ù NH·∫†C ---
        const audio = document.getElementById("song");
        const urlParams = new URLSearchParams(window.location.search);
        const startTime = parseFloat(urlParams.get('t')) || 0;
        
        if (audio) {
            audio.currentTime = startTime;
            audio.play().catch(e => console.log("Ch·ªù t∆∞∆°ng t√°c ƒë·ªÉ ph√°t nh·∫°c"));
        }

        // --- X·ª¨ L√ù GIAO DI·ªÜN ---
        document.addEventListener('DOMContentLoaded', function() {
            var openBtn = document.getElementById('btn-open-letter');
            
            if (openBtn) {
                openBtn.addEventListener('click', function() {
                    document.querySelectorAll('.flower-img').forEach(el => el.classList.toggle("active"));
                    document.querySelector('.circle').classList.toggle("active");
                    document.querySelector('.box-slider_img1').classList.toggle("active");
                    document.querySelector('.cat').classList.toggle("active");
                    document.querySelector('.box-number').classList.toggle("active");
                    document.querySelector('.box-button').classList.toggle("active");
                    document.querySelectorAll('.rhombus').forEach(el => el.classList.toggle("active"));
                    document.querySelector('.rhombus-img').classList.toggle("active");
                    document.querySelector('.mail').classList.toggle("active");
                    
                    if(audio.paused) audio.play();
                });
            }

            var mailBtn = document.querySelector(".mail button");
            var slider3 = document.querySelector(".slider3");
            var closeSlider3 = document.querySelector(".fa-xmark");
            
            if(mailBtn) {
                mailBtn.onclick = function(){
                    slider3.classList.add("active");
                }
            }
            if(closeSlider3) {
                closeSlider3.onclick = function(){
                    slider3.classList.remove("active");
                }
            }
        });
        
        var name = urlParams.get('name');
        if (name != null) {
            for (var i = 0; i < data_name.length; i++) {
                if (name == data_name[i].name) {
                    document.getElementById("name-cua-em").innerHTML = data_name[i].name;
                    document.getElementById("img-cua-em").src = data_name[i].img;
                    break;
                }
            }
        }
    </script>
</body>
</html>